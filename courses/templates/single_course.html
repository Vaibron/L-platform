{% extends 'base.html' %}

{% load static %}

{% block title %}
{{ course.title }}
{% endblock %}

{% block content %}
<div class="container mt-5">
    <!-- Стильная кнопка возврата -->
    <div class="mb-4">
        <a href="{% url 'course_list' %}" class="btn btn-light p-2 px-4 rounded-pill shadow-sm"
           style="font-size: 1.1em; position: relative; transition: all 0.3s ease-in-out;">
            <i class="fas fa-arrow-left mr-2"></i> Назад к курсам
        </a>
    </div>

    <div class="row">
        <!-- Изображение курса -->
        <div class="col-md-4">
            <div class="course-image-container overflow-hidden rounded-3 shadow-sm" style="position: relative; width: 100%; padding-bottom: 100%; background-color: #f1f1f1; border-radius: 15px;">
                {% if course.image %}
                    <img src="{{ course.image.url }}" alt="{{ course.title }}" class="course-image img-fluid" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; border-radius: 15px;">
                {% else %}
                    <img src="{% static 'default-course-image.jpg' %}" alt="{{ course.title }}" class="course-image img-fluid" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; border-radius: 15px;">
                {% endif %}
            </div>
        </div>
        <!-- Информация о курсе -->
        <div class="col-md-8">
            <h1 class="mb-4" style="font-weight: 700;">{{ course.title }}</h1>
            <p class="course-description text-muted">{{ course.description|safe }}</p>
            <div class="course-meta mt-4">
                <p><strong>Продолжительность:</strong> {{ course.duration }}</p>
                <p><strong>Уровень сложности:</strong> {{ course.difficulty_level }}</p>
            </div>

            {% if course.is_available %}
                <!-- Показываем кнопку "Начать курс", если курс доступен -->
                <div class="mt-4">
                    <a href="{% url 'start_course' course.id %}" class="btn btn-light btn-lg rounded-3 shadow-sm"
                       style="position: relative; transition: all 0.3s ease-in-out;">
                        Начать курс <i class="fas fa-arrow-right ml-2"></i>
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Плашка о разработке (перемещено сюда) -->
    {% if not course.is_available %}
        <div class="alert alert-info d-flex align-items-center p-3 mt-4" role="alert" style="border-radius: 10px; background-color: #f1f8ff; border-left: 5px solid #17a2b8;">
            <i class="fas fa-question-circle" style="font-size: 2em; color: #17a2b8; margin-right: 15px;"></i>
            <span class="text-muted" style="font-size: 1.2em;">Этот курс в разработке. Пожалуйста, следите за обновлениями!</span>
        </div>
    {% endif %}

    <!-- Плашка о содержании -->
    {% if not course.is_content_available %}
        <div class="alert alert-warning d-flex align-items-center p-3 mt-4" role="alert" style="border-radius: 10px; background-color: #fff4e5; border-left: 5px solid #ffc107;">
            <i class="fas fa-lock" style="font-size: 2em; color: #ffc107; margin-right: 15px;"></i>
            <span class="text-muted" style="font-size: 1.2em;">Содержание курса временно недоступно. Пожалуйста, следите за обновлениями!</span>
        </div>
    {% else %}
        <!-- Если курс доступен, показываем темы -->
        {% if course.topics.exists %}
            <h2 class="mt-5" style="font-weight: 600; color: #333;">Содержание:</h2>
            <div class="list-group mt-4">
                {% for topic in course.topics.all %}
                    <div class="list-group-item d-flex align-items-center py-3" style="border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 10px;">
                        <i class="fas fa-book mr-3" style="font-size: 1.3em; color: #555;"></i>
                        <h4 class="topic-title text-dark" style="font-size: 1.1em; font-weight: 600;">{{ topic.title }}</h4>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endif %}

    <!-- Легкий поп-ап или сообщение -->
    <div class="mt-5 alert alert-info text-center" role="alert">
        <strong>Подсказка!</strong> Не торопитесь! Курс будет интересным и полезным, даже если вы начинаете с нуля.
    </div>

</div>

{% endblock %}
